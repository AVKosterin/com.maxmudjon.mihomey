{
  "id": "com.maxmudjon.mihomey",
  "version": "0.2.0",
  "compatibility": ">=1.5.0",
  "sdk": 2,
  "name": {
    "en": "Mi Homey"
  },
  "description": {
    "en": "Adds support for Mi Gateways child devices"
  },
  "category": [
    "tools"
  ],
  "permissions": [],
  "images": {
    "large": "/assets/images/large.png",
    "small": "/assets/images/small.png"
  },
  "author": {
    "name": "Maxmudjon Payziyev",
    "email": "bio42@mail.ru"
  },
  "contributors": {
      "developers": [
          {
              "name": "Maxmudjon Payziyev",
              "email": "bio42@mail.ru"
          }
      ]
  },
  "contributing": {
      "donate": {
          "paypal": {
              "username": "paypal.me/maxmudjon"
          }
      }
  },
  "bugs": {
      "url": "https://github.com/Maxmudjon/com.maxmudjon.mihomey/issues"
  },
  "flow": {
    "triggers": [
      {
        "id": "left_click_db86_switch",
        "title": {
          "en": "Left button clicked"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=db86_switch"
          }
        ]
      },
      {
        "id": "right_click_db86_switch",
        "title": {
          "en": "Right button clicked"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=db86_switch"
          }
        ]
      },
      {
        "id": "both_click_db86_switch",
        "title": {
          "en": "Both buttons clicked"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=db86_switch"
          }
        ]
      },
      {
        "id": "power_on",
        "title": {
          "en": "Power on"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=plug"
          }
        ]
      },
      {
        "id": "power_off",
        "title": {
          "en": "Power off"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=plug"
          }
        ]
      },
      {
        "id": "power_toggle",
        "title": {
          "en": "Power changed"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=plug"
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "power_active",
        "title": {
          "en": "Power is !{{on|off}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=plug"
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "power_on",
        "title": {
          "en": "Power turn on"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=plug"
          }
        ]
      },
      {
        "id": "power_off",
        "title": {
          "en": "Power turn off"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=plug"
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "id": "db86_switch",
      "name": {
        "en": "Aqara Wireless Switch"
      },
      "class": "sensor",
      "capabilities": [
        "measure_battery",
        "alarm_battery"
        
      ],
      "mobile": {
        "components": [
          {
            "id": "icon"
          },
          {
            "id": "battery",
            "capabilities": [
              "measure_battery"
            ],
            "options": { "showTitle": true }
          },
          {
            "id": "sensor",
            "capabilities": [ "alarm_battery"],
            "options": {
              "showTitle": true,
              "icons": {
                  "alarm_battery": "/drivers/db86_switch/assets/alarm_battery.svg"
              }
            }
          }
        ]
      },
      "images": {
        "large": "/drivers/db86_switch/assets/images/large.png",
        "small": "/drivers/db86_switch/assets/images/small.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          },
          "options": {
            "singular": false
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ]
    },
    {
      "id": "mi_motion_sensor",
      "name": {
        "en": "Mi Motion Sensor"
      },
      "class": "sensor",
      "capabilities": [
        "alarm_motion",
        "measure_battery",
        "alarm_battery"
        
      ],
      "capabilitiesOptions": {
        "alarm_motion": {
          "title": {
            "en": "Motion"
          }
        }
      },
      "mobile": {
        "components": [
          {
            "id": "icon"
          },
          {
            "id": "battery",
            "capabilities": [
              "measure_battery"
            ],
            "options": { "showTitle": true }
          },
          {
            "id": "sensor",
            "capabilities": [ "alarm_motion", "alarm_battery"],
            "options": {
              "showTitle": true,
              "icons": {
                  "alarm_motion": "/drivers/mi_motion_sensor/assets/mi_motion_sensor_icon.svg",
                  "alarm_battery": "/drivers/mi_motion_sensor/assets/alarm_battery.svg"
              }
            }
          }
        ]
      },
      "images": {
        "large": "/drivers/mi_motion_sensor/assets/images/large.png",
        "small": "/drivers/mi_motion_sensor/assets/images/small.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          },
          "options": {
            "singular": false
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ]
    },
    {
      "id": "wleak_sensor",
      "name": {
        "en": "Aqara Water Sensor"
      },
      "class": "sensor",
      "capabilities": [
        "alarm_water",
        "measure_battery",
        "alarm_battery"
        
      ],
      "capabilitiesOptions": {
        "alarm_water": {
          "title": {
            "en": "Water"
          }
        }
      },
      "mobile": {
        "components": [
          {
            "id": "icon"
          },
          {
            "id": "battery",
            "capabilities": [
              "measure_battery"
            ],
            "options": { "showTitle": true }
          },
          {
            "id": "sensor",
            "capabilities": [ "alarm_water", "alarm_battery"],
            "options": {
              "showTitle": true,
              "icons": {
                  "alarm_water": "/drivers/wleak_sensor/assets/wleak_sensor_icon.svg",
                  "alarm_battery": "/drivers/wleak_sensor/assets/alarm_battery.svg"
              }
            }
          }
        ]
      },
      "images": {
        "large": "/drivers/wleak_sensor/assets/images/large.png",
        "small": "/drivers/wleak_sensor/assets/images/small.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          },
          "options": {
            "singular": false
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ]
    },
    {
      "id": "plug",
      "name": {
        "en": "Plug Base"
      },
      "class": "socket",
      "capabilities": [
        "onoff",
        "meter_power",
        "measure_power"        
      ],
      "capabilitiesOptions": {
        "meter_power": {
          "title": {
            "en": "KWh"
          }
        },
        "measure_power": {
          "title": {
            "en": "Watt"
          }
        },
        "onoff": {
            "title": {
                "en": "Power"
            }
        }
      },
      "mobile": {
        "components": [
          {
            "id": "icon"
          },
          {
            "id": "toggle",
            "capabilities": [ "onoff" ],
            "options": {
                "showTitle": true
            }
          },
          {
            "id": "sensor",
            "capabilities": [ "meter_power", "measure_power"],
            "options": {
              "showTitle": true,
              "icons": {
                  "meter_power": "/drivers/plug/assets/plug_kwh_icon.svg",
                  "measure_power": "/drivers/plug/assets/plug_watt_hour_icon.svg"
              }
            }
          }
        ]
      },
      "images": {
        "large": "/drivers/plug/assets/images/large.png",
        "small": "/drivers/plug/assets/images/small.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          },
          "options": {
            "singular": false
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ]
    }
  ]
}